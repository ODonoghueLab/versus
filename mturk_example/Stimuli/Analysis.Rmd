---
title: "Point Distances"
author: "Julian Heinrich"
date: "18 December 2015"
output: html_document
---

```{r, echo=FALSE}
rm(list = ls())
# load the trials table
source("stimuli.R")

# load answers
answers <- read.csv("results.csv")

# data cleansing and pre-processing
require(dplyr)
answers <- tbl_df(answers) %>%
  mutate(stimuli = as.character(Input.stimuli)) %>%
  select(HITId, HITTypeId, AssignmentId, WorkerId, WorkTimeInSeconds, stimuli, answer = Answer.answer) %>%
  left_join(trials) %>%
  mutate(is.correct = (answer == correct_answer))

assignments <- length(unique(answers$AssignmentId))

accuracy <- answers %>%
  group_by(coordinate_system, dimensions, distance_deviation) %>%
  summarise(correct = length(which(is.correct)),
            trials = n(),
            p = correct/trials)
```

# Estimating relative point distances with colored points

## Summary Stats

* Number of workers: `r length(unique(answers$WorkerId))`
* Median work time: `r median(answers$WorkTimeInSeconds)` s
* Number of assignments: `r assignments`

## Worker

### Time
```{r, echo=F}
ggplot(answers, aes(WorkerId,WorkTimeInSeconds)) + geom_boxplot() + ylim(0,200)
```

### Accuracy
```{r, echo=F}
ggplot(answers, aes(is.correct)) + geom_histogram() + facet_grid(WorkerId~coordinate_system+dimensions)
```

## Accuracy

```{r, echo=F}
correct_assignments <- length(which(answers$answer == answers$correct_answer))
by_cs <- answers %>%
  group_by(coordinate_system) %>%
  tally(is.correct)

by_dim <- answers %>%
  group_by(dimensions) %>%
  tally(is.correct)

by_cs_dim <- answers %>%
  group_by(coordinate_system, dimensions) %>%
  tally(is.correct)

```

To measure accuracy, we count the number of correct answers per worker and coordinate system. Overall, there were `r correct_assignments` answers out of `r assignments`, i.e. `r correct_assignments/assignments` were answered correctly.

```{r, echo=F}
by_dd <- answers %>%
  group_by(distance_deviation) %>%
  tally(is.correct)

ggplot(accuracy, aes(as.factor(dimensions), p)) + geom_point()
```

```{r, echo=F}
ggplot(by_dim, aes(dimensions, n)) + geom_point()
```

